<!-- /src/features/flashCards/templates/designs/design3.ejs -->
<style>
    /* Bold & Vibrant design: strong background color, high-contrast text */
  
    .card-front,
    .card-back {
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 5%;
      position: relative;
      font-family: "Impact", "Arial Black", sans-serif; 
      color: #fff; /* White text for contrast on bold backgrounds */
      /* Use a strong background color, e.g. a rich teal */
      background-color: #008080;
    }
  
    .card-front {
      /* Extra thick border in a complementary color (like yellow) */
      border: 4px solid #ffcc00;
      border-radius: 8px;
    }
  
    .card-back {
      /* Slight variation in background color for the back */
      background-color: #006666;
      border: 4px solid #ffcc00;
      border-radius: 8px;
    }
  
    .qr-code-area {
      width: 30%;
      aspect-ratio: 1 / 1;
      margin: 0 auto 5%;
      /* Use a bright accent for the dashed border (like pink) */
      border: 2px dashed #ff0080;
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      font-size: 0.8em;
    }
    .qr-code-area img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
  
    .card-question {
      text-align: center;
      font-size: 1.4em;
      margin-top: 10%;
      text-transform: uppercase;
      /* Slight text shadow for extra pop */
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
  
    /* Bold bottom info bar */
    .bottom-info {
      position: absolute;
      left: 0; right: 0; bottom: 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1em;
      font-weight: bold;
      text-transform: uppercase;
    }
    .topic-center {
      flex: 1;
      text-align: center;
    }
    .author-right {
      flex: 1;
      text-align: right;
    }
  
    /* Back side content: big and bold */
    .scalable-content {
      font-size: 1.1em;
      line-height: 1.4;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
    .card-answer {
      margin-top: 5%;
      text-align: center;
      font-size: 1.4em;
      font-weight: 900;
      text-transform: uppercase;
    }
    .card-example {
      text-align: center;
      margin-top: 4%;
      font-size: 1em;
      color: #ffe;
    }
  
    @media print {
      .card-front, .card-back {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  
    /* Highlight.js optional styling */
    pre.hljs, code.hljs {
      font-family: Consolas, Monaco, monospace;
      font-size: 0.8em;
      display: block;
      white-space: pre-wrap;
      background: #f8f8f8;
      border: 1px solid #999;
      padding: 0.5em;
      border-radius: 4px;
      margin: 0.75em auto;
      max-width: 100%;
      box-sizing: border-box;
      text-align: left;
      color: #333; /* override white text on bright background */
    }
  </style>
  
  <% if (side === 'front') { %>
    <!-- FRONT SIDE -->
    <div class="card-front">
  
      <!-- QR Code -->
      <div class="qr-code-area">
        <% if (card && card.qrCodeUrl) { %>
          <img src="<%= card.qrCodeUrl %>" alt="QR Code" />
        <% } else { %>
          No QR Code
        <% } %>
      </div>
  
      <!-- QUESTION -->
      <h2 class="card-question">
        <%= card && card.question ? card.question : 'No question provided' %>
      </h2>
  
      <!-- BOTTOM INFO (Topic & Author) -->
      <div class="bottom-info">
        <span class="topic-center">
          <%= (card && card.topic && card.topic.name) ? card.topic.name : 'No topic' %>
        </span>
        <span class="author-right">
          <%= card && card.authorName ? card.authorName : 'No author' %>
        </span>
      </div>
  
    </div>
  
  <% } else { %>
    <!-- BACK SIDE -->
    <div class="card-back">
      <div class="scalable-content">
  
        <!-- ANSWER -->
        <h3 class="card-answer">
          <%= card && card.answer ? card.answer : 'No answer provided' %>
        </h3>
  
        <!-- EXAMPLE AREA -->
        <div class="card-example">
          <% 
            const hasCard = !!card;
            const atype = hasCard ? card.answerType : null;
            const examplesData = hasCard ? card.examples : null;
          %>
  
          <% if (!hasCard) { %>
            No example
  
          <% } else if (atype === 'NONE') { %>
            <span style="color: #bbb;">(No example)</span>
  
          <% } else if (atype === 'CODE_SNIPPET') { %>
            <% 
              // If highlightCode is available, use it to highlight
              const renderHighlighted = (rawCode) => {
                if (typeof highlightCode === 'function') {
                  return highlightCode(rawCode);
                } else {
                  return rawCode; // fallback plain text
                }
              };
  
              if (Array.isArray(examplesData)) {
                examplesData.forEach((ex) => {
                  const codeContent = ex && ex.code ? ex.code : 'No code snippet';
                  const snippetHtml = renderHighlighted(codeContent);
            %>
                  <pre class="hljs"><code class="hljs"><%- snippetHtml %></code></pre>
            <%   });
              } else {
                const codeContent = (examplesData && examplesData.code)
                  ? examplesData.code
                  : 'No code snippet';
                const snippetHtml = renderHighlighted(codeContent);
            %>
                <pre class="hljs"><code class="hljs"><%- snippetHtml %></code></pre>
            <% } %>
  
          <% } else if (atype === 'FLOWCHART' || atype === 'DIAGRAM') { %>
            <% if (typeof examplesData === 'string') { %>
              <img src="<%= examplesData %>" alt="Flowchart/Diagram" style="max-width:100%;" />
            <% } else { %>
              No valid image URL
            <% } %>
  
          <% } else { %>
            <!-- Default or "regular" example text -->
            <% if (Array.isArray(examplesData)) { %>
              <%= examplesData.join(', ') %>
            <% } else if (examplesData) { %>
              <%= examplesData %>
            <% } else { %>
              No example
            <% } %>
          <% } %>
        </div>
        <!-- END card-example -->
  
      </div>
    </div>
  <% } %>
  